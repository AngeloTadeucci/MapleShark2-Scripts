using (ScriptAPI) {
    f = AddByte("Function");
    AddInt("PortalId");
    if (f == 0) {
        AddByte("Visible?");
        AddByte("MinimapVisible?");
        DecodeCoordF("Location");
        DecodeCoordF("Rotation");
        DecodeCoordF("Unknown");
        AddUnicodeString("UnknownStr"); // Eff_Com_Portal_E
        AddInt("TargetMapId");
        AddInt("Unknown");
        AddInt("Unknown");
        AddByte("Unknown");
        AddLong("UnknownLongId");
        AddByte("Unknown");
        AddInt("Unknown");
        AddShort("Unknown");
        AddInt("Unknown");
        AddBool("Unknown"); // locked?
        AddUnicodeString("PortalOwnerName"); // minigame portal
        AddUnicodeString("UnknownStr");
        AddUnicodeString("UnknownStr");
    } else if (f == 1) {
        // ??
    } else if (f == 2) {
        AddByte("Unknown");
        AddByte("Unknown");
        AddByte("Unknown");
        AddShort("Unknown");
    } else if (f == 3) {
        AddFloat("CoordX");
        AddFloat("CoordY");
        AddFloat("CoordZ");
        AddFloat("UnknownCoordX");
        AddFloat("UnknownCoordY");
        AddFloat("UnknownCoordZ");
    }
}