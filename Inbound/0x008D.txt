using (ScriptAPI) {
    f = AddByte("function");
    switch ((int)f) {
        case 0: // create group #1
            AddInt("GroupChatId");
            count = AddByte("count");
            for (i = 0; i < count; i++) {
                t = AddByte("Type?");
                if (t == 1 || t ==2) {
                    DecodePlayer();
                }
            }
        case 1: // create group #2
            AddInt("GroupChatId");
        case 2: // invite #1
            AddUnicodeString("InviteSender");
            AddUnicodeString("InvitedPlayer");
            AddInt("GroupChatId");
        case 3: // receive invite
            AddUnicodeString("InviteSender");
            AddUnicodeString("InvitedPlayer");
            AddInt("GroupChatId");
        case 4: // left group (self)
            AddInt("GroupChatId");
        case 6: // invite #2
            AddInt("Unknown");
            AddUnicodeString("OwnerName");
            t = AddByte("Type?");
            if (t == 1 || t ==2) {
                DecodePlayer();
            }
        case 7: // player left group (others)
            AddInt("GroupChatId");
            AddByte("Unknown");
            AddUnicodeString("Name");
        case 8:
            AddInt("GroupChatId");
            AddUnicodeString("Unknown");
        case 9:
            AddInt("GroupChatId");
            AddUnicodeString("Unknown");
        case 10: // message group
            AddInt("GroupChatId");
            AddUnicodeString("UserName");
            AddUnicodeString("Message");
        case 11:
            AddInt("GroupChatId");
            AddUnicodeString("Unknown");
        case 12:
            AddInt("GroupChatId");
            AddUnicodeString("Unknown");
            AddUnicodeString("Unknown");
        case 13:
            AddByte("Unknown");
            AddInt("GroupChatId");
            AddUnicodeString("Unknown");
            AddUnicodeString("Unknown");
    }
}
