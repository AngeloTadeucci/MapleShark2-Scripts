using (ScriptAPI) {
    f = AddByte("function");

    switch ((int)f) {
        case 3: // open market
            // none
        case 5: // list mesos
            AddLong("MesosAmount");
            AddLong("ListingPrice");
        case 6: // collect listing
            AddLong("ListingUid");
        case 7: // search?
            AddLong("MinAmount");
            AddLong("MaxAmount");
        case 8: // purchase
            AddLong("ListingUid");
    }
}