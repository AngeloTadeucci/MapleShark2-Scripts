using (ScriptAPI) {
    f = AddByte("function");
    if (f == 0) {
        // LoadSkills
    } else if (f == 1) { // SaveSkills
        AddLong("ActiveSkillTabId");
        AddLong("SavingTabId"); // 0 = not saving any tab
        AddInt("SkillRank");
        count = AddInt("SkillTabsCount");
        for (i = 0; i < count; i++) {
            StartNode("SkillTab " + i);
            AddLong("SkillTabId");
            AddUnicodeString("SkillTabName");
            skillCount = AddInt("count");
            for (j = 0; j < skillCount; j++) {
                AddInt("SkillId");
                AddInt("SkillPoints");
            }
            EndNode(true);
        }
    } else if (f == 2) {
        // Rename skill tab
        AddLong("SkillTabId");
        AddUnicodeString("SkillTabName");
    }
}
