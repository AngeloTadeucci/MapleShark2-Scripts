using (ScriptAPI){
    f = AddByte("function");
    switch ((int)f) {
        case 0: // request trade
            AddLong("CharacterId");
        case 2: // got trade request
            AddLong("CharacterId");
        case 3: // accept trade
            AddLong("CharacterId");
        case 4: // decline trade
            AddLong("CharacterId");
        case 5:
            AddLong("Unknown");
        case 7: // cancel trade
            // None
        case 8: // Add item
            AddLong("ItemUid");
            AddInt("Amount");
            AddInt("Slot");
        case 9: // Remove item
            AddLong("ItemUid");
            AddInt("Slot");
        case 10: // Set mesos
            AddLong("Mesos");
        case 11: // finalize trade
            // None
        case 13: // confirm finalize trade
            // None
    }
}