using (ScriptAPI) {
    f = AddByte("function");

    switch ((int)f) {
        case 2: // request
            AddUnicodeString("Name");
            AddUnicodeString("Message");
        case 3: // accept
            AddLong("EntryUid");
        case 4: // decline
            AddLong("EntryUid");
        case 5: // block
            AddLong("EntryUid");
            AddUnicodeString("Name");
            AddUnicodeString("BlockReason");
        case 6: // unblock
            AddLong("EntryUid");
        case 7: // remove friend
            AddLong("EntryUid");
        case 10: // update block msg
            AddLong("EntryUid");
            AddUnicodeString("Name");
            AddUnicodeString("BlockReason");
        case 17: // cancel friend request
            AddLong("EntryUid");
    }
}